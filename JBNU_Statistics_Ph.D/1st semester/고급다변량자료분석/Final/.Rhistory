ILD <- read.csv("C:/Users/HSY/Desktop/survival_final.csv",sep=",",header=T)
head(ILD)
View(ILD)
summary(ILD)
ILD <- read.csv("C:/Users/HSY/Desktop/survival_final.csv",sep=",",header=T)
head(ILD)
ILD$status2 <- as.character(ILD$status2)
ILD$sex <- as.character(ILD$sex)
ILD$sex <- as.character(ILD$sex)
ILD$ILA <- as.character(ILD$ILA)
ILD$Smoking3 <- as.character(ILD$Smoking3)
ILD$honeycombing <- as.character(ILD$honeycombing)
summary(ILD)
ILD <- read.csv("C:/Users/HSY/Desktop/survival_final.csv",sep=",",header=T)
head(ILD)
ILD$status2 <- as.character(ILD$status2)
ILD$sex <- as.character(ILD$sex)
ILD$ILA <- as.character(ILD$ILA)
ILD$Smoking3 <- as.character(ILD$Smoking3)
ILD$honeycombing <- as.character(ILD$honeycombing)
summary(ILD)
ILD <- read.csv("C:/Users/HSY/Desktop/survival_final.csv",sep=",",header=T)
head(ILD)
ILD$sex <- as.character(ILD$sex)
ILD$ILA <- as.character(ILD$ILA)
ILD$Smoking3 <- as.character(ILD$Smoking3)
ILD$honeycombing <- as.character(ILD$honeycombing)
summary(ILD)
sum(ILD$sex==1)
sum(ILD$ILA==1)
ILD <- read.csv("C:/Users/HSY/Desktop/survival_final.csv",sep=",",header=T)
head(ILD)
ILD$sex <- as.character(ILD$sex)
ILD$ILA <- as.character(ILD$ILA)
ILD$Smoking3 <- as.character(ILD$Smoking3)
ILD$honeycombing <- as.character(ILD$honeycombing)
summary(ILD)
sum(ILD$sex==1) ; sum(ILD$sex==0)
sum(ILD$ILA==1) ; sum(ILD$ILA==0)
sum(ILD$Smoking3==0) ; sum(ILD$Smoking3==1) ; sum(ILD$Smoking3==2)
sum(ILD$honeycombing==1) ; sum(ILD$honeycombing==0)
ILD <- read.csv("C:/Users/HSY/Desktop/survival_final.csv",sep=",",header=T)
head(ILD)
ILD$sex <- as.character(ILD$sex)
ILD$ILA <- as.character(ILD$ILA)
ILD$Smoking3 <- as.character(ILD$Smoking3)
ILD$honeycombing <- as.character(ILD$honeycombing)
summary(ILD)
sum(ILD$status2==1) ; sum(ILD$status2==0 | ILD$status2==2)
sum(ILD$sex==1) ; sum(ILD$sex==0)
sum(ILD$ILA==1) ; sum(ILD$ILA==0)
sum(ILD$Smoking3==0) ; sum(ILD$Smoking3==1) ; sum(ILD$Smoking3==2)
sum(ILD$honeycombing==1) ; sum(ILD$honeycombing==0)
library(KMsurv)
library(survminer)
attach(ILD)
fit <- survfit(Surv(time,(status2==1))~1,data=ILD,method='breslow')
summary(fit)
library(survival)
library(KMsurv)
library(tidyverse)
library(survminer)
attach(ILD)
fit <- survfit(Surv(time,(status2==1))~1,data=ILD,method='breslow')
summary(fit)
library(survival)
library(KMsurv)
library(tidyverse)
library(survminer)
attach(ILD)
fit <- survfit(Surv(time,(status2==1))~1,data=ILD)
summary(fit)
?ggsurvplot
View(fit)
ggsurvplot(fit,data=pbc,conf.int=TRUE,risk.table.col="strata",ggtheme=theme_bw())
ggsurvplot(fit,data=ILD,conf.int=TRUE,risk.table.col="strata",ggtheme=theme_bw())
ggsurvplot(fit,data=ILD,fun='cumhaz',conf.int=TRUE,risk.table.col="strata",ggtheme=theme_bw())
fit$cumhaz
plot(log(ILD$time),fit$cumhaz)
fit1 <- coxph(Surv(time,(status2==1))~age,ties="efron",data=IDA)
summary(fit1)
fit1 <- coxph(Surv(time,(status2==1))~age,ties="efron",data=ILD)
summary(fit1)
fit1 <- coxph(Surv(time,(status2==1))~age,ties="efron",data=ILD)
summary(fit1)
fit2 <- coxph(Surv(time,(status2==1))~sex,ties="efron",data=ILD)
summary(fit2)
fit3 <- coxph(Surv(time,(status2==1))~Smoking3,ties="efron",data=ILD)
summary(fit3)
fit4 <- coxph(Surv(time,(status2==1))~FEV1FVC,ties="efron",data=ILD)
summary(fit4)
fit5 <- coxph(Surv(time,(status2==1))~honeycombing,ties="efron",data=ILD)
summary(fit5)
fit1 <- coxph(Surv(time,(status2==1))~age,ties="efron",data=ILD)
summary(fit1)
fit2 <- coxph(Surv(time,(status2==1))~sex,ties="efron",data=ILD)
summary(fit2)
fit3 <- coxph(Surv(time,(status2==1))~Smoking3,ties="efron",data=ILD)
summary(fit3)
fit4 <- coxph(Surv(time,(status2==1))~FEV1FVC,ties="efron",data=ILD)
summary(fit4)
fit5 <- coxph(Surv(time,(status2==1))~honeycombing,ties="efron",data=ILD)
summary(fit5)
fit6 <- coxph(Surv(time,(status2==1))~age+sex+Smoking3+FEV1FVC+honeycombing,ties="efron",data=ILD)
summary(fit6)
wei1 <- survreg(Surv(time,(status2==1))~age,data=ILD,dist="weibull")
summary(wei1)
wei2 <- survreg(Surv(time,(status2==1))~sex,data=ILD,dist="weibull")
summary(wei2)
wei3 <- survreg(Surv(time,(status2==1))~Smoking3,data=ILD,dist="weibull")
summary(wei3)
wei4 <- survreg(Surv(time,(status2==1))~FEV1FVC,data=ILD,dist="weibull")
summary(wei4)
wei5 <- survreg(Surv(time,(status2==1))~honeycombing,data=ILD,dist="weibull")
summary(wei5)
wei6 <- survreg(Surv(time,(status2==1))~age+sex+Smoking3+FEV1FVC+honeycombing,data=ILD,dist="weibull")
summary(wei6)
KM1 <- survfit(Surv(time,(status2==1))~sex,data=ILD)
summary(KM1)
ggsurvplot(KM1,
conf.int = TRUE,
risk.table.col = "strata", # Change risk table color by groups
ggtheme = theme_bw()
)
ggsurvplot(
KM1,                     # survfit object with calculated statistics.
pval = TRUE,             # show p-value of log-rank test.
conf.int = TRUE,         # show confidence intervals for
# point estimaes of survival curves.
xlab = "Time until death",   # customize X axis label.
ggtheme = theme_light(), # customize plot and risk table with a theme.
risk.table = "abs_pct",  # absolute number and percentage at risk.
risk.table.y.text.col = T,# colour risk table text annotations.
risk.table.y.text = FALSE,# show bars instead of names in text annotations
# in legend of risk table.
ncensor.plot = TRUE,      # plot the number of censored subjects at time t
surv.median.line = "hv",  # add the median survival pointer.
legend.labs =
c("Female", "Male"),    # change legend labels.
)
KM2 <- survfit(Surv(time,(status2==1))~Smoking3,data=ILD)
summary(KM2)
ggsurvplot(KM2,
conf.int = TRUE,
risk.table.col = "strata", # Change risk table color by groups
ggtheme = theme_bw()
)
ggsurvplot(
KM2,                     # survfit object with calculated statistics.
pval = TRUE,             # show p-value of log-rank test.
conf.int = TRUE,         # show confidence intervals for
# point estimaes of survival curves.
xlab = "Time until death",   # customize X axis label.
ggtheme = theme_light(), # customize plot and risk table with a theme.
risk.table = "abs_pct",  # absolute number and percentage at risk.
risk.table.y.text.col = T,# colour risk table text annotations.
risk.table.y.text = FALSE,# show bars instead of names in text annotations
# in legend of risk table.
ncensor.plot = TRUE,      # plot the number of censored subjects at time t
surv.median.line = "hv",  # add the median survival pointer.
legend.labs =
c("Never", "Current", "Ex"),    # change legend labels.
)
fita <- coxph(Surv(time,(status2==1))~age,data=ILD)
summary(fita)
fita <- coxph(Surv(time,(status2==1))~age,data=ILD)
summary(fita)
r1 <- resid(fita,data=ILD,type="martingale")
plot(age,r1,xlab="age",ylab="martingale")
lines(lowess(age,r1,iter=0),lty=2)
fita <- coxph(Surv(time,(status2==1))~age,data=ILD)
summary(fita)
r1 <- resid(fita,data=ILD,type="martingale")
plot(age,r1,xlab="age",ylab="martingale")
lines(lowess(age,r1,iter=0),lty=2)
ggcoxdiagnostics(fita,type="martingale",linear.prediction=FALSE,ggtheme=theme_bw())
fitb <- coxph(Surv(time,(status2==1))~FEV1FVC,data=ILD)
summary(fitb)
ggcoxdiagnostics(fitb,type="martingale",linear.prediction=FALSE,ggtheme=theme_bw())
?stepAIC
fit <- coxph(Surv(time,(status2==1))~sex+age+ILA+FEV1FVC+FEF2575+Smoking3+honeycombing,data=ILD)
fit.step <- stepAIC(fit)
library(MASS)
fit <- coxph(Surv(time,(status2==1))~sex+age+ILA+FEV1FVC+FEF2575+Smoking3+honeycombing,data=ILD)
fit.step <- stepAIC(fit)
fit <- coxph(Surv(time,(status2==1))~sex+age+FEV1FVC+Smoking3+honeycombing,data=ILD)
fit.step <- stepAIC(fit,trace=F)
summary(fit.step)
ggcoxdiagnostics(fit, type="martingale", linear.prediction=FALSE, ggtheme=theme_bw())
ggcoxdiagnostics(fit, type="deviance", linear.prediction=FALSE, ggtheme=theme_bw())
